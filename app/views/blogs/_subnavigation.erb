<% blog ||= @blog -%>
<% bloggable ||= @bloggable || blog.bloggable %>
<%= bread_el image_tag('shim.gif', :class => 'shim') + bloggable.display_name, bloggable_path_for(bloggable), :class => 'bread-home' %>
<%= bread_el 'Blogs', blogs_path_from_bloggable(bloggable), :current => blog.nil? || blog.new_record? %>
<%= bread_el(truncate(blog.name, 20), blog_path_for(blog), :current => true) if blog && !blog.new_record? %>

<% if controller.controller_name == 'blogs' %>
<%= subnavi_el 'New Blog', blog_path_from_bloggable(bloggable, :prefix => :new), :current => controller.action_name == 'new' if bloggable.editable_by?(get_viewer) && (blog.nil? || blog.new_record?) %>
<%= subnavi_el 'Edit', blog_path_for(blog, :prefix => :edit), :current => controller.action_name == 'edit' if blog && !blog.new_record? && blog.editable_by?(get_viewer) %>
<%= subnavi_el 'Clip', clip_path_from_widgetable(blog, :prefix => :new) if logged_in? && blog && !blog.new_record? %>
<%= subnavi_el 'Import Articles', articles_path_from_blog(blog, :prefix => :import) if blog && !blog.new_record? && blog.editable_by?(get_viewer) %>
<%= subnavi_el 'New Article', article_path_from_blog(blog, :prefix => :new) if blog && !blog.new_record? && blog.editable_by?(get_viewer) %>
<% end %>